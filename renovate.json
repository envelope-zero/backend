{
  "extends": ["group:monorepos", "group:recommended"],
  "dependencyDashboard": true,
  "pre-commit": {
    "enabled": true
  },
  "labels": ["renovate"],
  "rangeStrategy": "pin",
  "rebaseWhen": "behind-base-branch",
  "semanticCommits": "enabled",
  "platformAutomerge": true,
  "postUpdateOptions": ["gomodTidy"],
  "regexManagers": [
    {
      "description": "Upgrade go version",
      "fileMatch": ["(^workflow-templates|\\.github/workflows)/[^/]+\\.ya?ml$"],
      "matchStrings": ["go-version:\\s(?<currentValue>.*)"],
      "datasourceTemplate": "golang-version",
      "depNameTemplate": "go"
    },
    {
      "description": "Upgrade arbitrary go module versions in Makefiles",
      "fileMatch": ["^Makefile"],
      "matchStrings": [
        "# renovate:\\sdatasource=(?<datasource>.*?)\\sdepName=(?<depName>.*?)\\s.*@(?<currentValue>.*)"
      ]
    },
    {
      "description": "Upgrade go minor for golangci-lint",
      "fileMatch": ["^\\.golangci\\.yml"],
      "matchStrings": ["lang-version: \"(?<currentValue>.*)\""],
      "datasourceTemplate": "github-tags",
      "depNameTemplate": "golang/go"
    }
  ],
  "packageRules": [
    {
      "description": "Parse go version for golangci-lint from GitHub tags",
      "extractVersion": "^go(?<version>\\d+\\.\\d+)",
      "matchPackageNames": ["golang/go"],
      "groupName": "go"
    },
    {
      "description": "Automatically merge minor updates for GitHub actions and go dependencies",
      "matchManagers": ["github-actions", "gomod"],
      "matchUpdateTypes": ["minor", "patch"],
      "automerge": true
    },
    {
      "description": "Group go upgrades",
      "matchPackageNames": ["go", "golang"],
      "groupName": "go",
      "prHeader": ":warning: Only upgrade the go version once you verified locally that the new go version works with the current swagger version. To do so, upgrade your machine to the new go version and run `pre-commit run --all-files`."
    },
    {
      "description": "Group swaggo/swag upgrades",
      "matchPackageNames": ["github.com/swaggo/swag", "swaggo/swag"],
      "groupName": "swaggo/swag"
    }
  ]
}
